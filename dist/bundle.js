(()=>{"use strict";var e={86:function(e,t,o){var n=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(o(593)),r=function(){function e(e,t,o){this.prefix="[LogDBSDK]  : ",this.databaseName=e,this.objectStoreName=t,this.db=null,this.Console=o}return e.prototype.openDatabase=function(){var e=this;return new Promise((function(t,o){var n=window.indexedDB.open(e.databaseName);n.onerror=function(e){var t=e.target.error;o(t)},n.onsuccess=function(o){e.db=o.target.result,t()},n.onupgradeneeded=function(t){var o=t.target.result;if(!o.objectStoreNames.contains(e.objectStoreName)){var n=o.createObjectStore(e.objectStoreName,{keyPath:"id",autoIncrement:!0});n.createIndex("byId","id",{unique:!0}),n.createIndex("byTimestamp","timestamp"),n.createIndex("byModule","module"),n.createIndex("byUserId","userId"),n.createIndex("byClientId","clientId")}}}))},e.prototype.executeQuery=function(e,t,o){var r=this;e.onsuccess=function(e){t&&t(e.target.result)},e.onerror=function(e){r.Console&&console.log("".concat(n.default.getFormattedDate()," - ").concat(r.prefix," Error executing query: ").concat(e.target.error)),o&&o(e.target.error)}},e.prototype.createTransaction=function(e){return this.db.transaction(this.objectStoreName,e).objectStore(this.objectStoreName)},e.prototype.createTable=function(e,t){var o=this;return new Promise((function(n,r){o.openDatabase().then((function(){n(),e&&e()})).catch((function(e){r(e),t&&t(e)}))}))},e.prototype.insertData=function(e,t,o){var n=this;return new Promise((function(r,a){var c=n.createTransaction("readwrite").add(e);n.executeQuery(c,(function(){r(),t&&t()}),(function(e){a(e),o&&o(e)}))}))},e.prototype.selectData=function(e,t,o){var r=this;return new Promise((function(a,c){var i,s=r.createTransaction("readonly"),l=[];(i=e&&e.startTime&&e.endTime?s.index("byTimestamp").openCursor(IDBKeyRange.bound(e.startTime,e.endTime)):s.openCursor()).onsuccess=function(o){var c=o.target.result;if(c){var i=c.value;e.module&&i.module!==e.module||e.level&&i.level!==e.level||e.userId&&i.userId!==e.userId||e.clientId&&i.clientId!==e.clientId||l.push(i),c.continue()}else r.Console&&console.log("".concat(n.default.getFormattedDate()," - ").concat(r.prefix,"Selected data:"),l),a(l),t&&t(l)},i.onerror=function(e){c(e.target.error),o&&o(e.target.error)}}))},e.prototype.updateData=function(e,t,o,r){var a=this;return new Promise((function(c,i){var s=a.createTransaction("readwrite").openCursor(IDBKeyRange.only(e));s.onsuccess=function(e){var s=e.target.result;if(s){var l=s.update(t);a.executeQuery(l,(function(){a.Console&&console.log("".concat(n.default.getFormattedDate()," - ").concat(a.prefix," Data updated successfully.")),c(),o&&o()}),(function(e){i(e),r&&r(e)}))}else a.Console&&console.log("".concat(n.default.getFormattedDate()," - ").concat(a.prefix," No data found for update.")),c(),o&&o()},s.onerror=function(e){i(e.target.error),r&&r(e.target.error)}}))},e.prototype.deleteData=function(e,t,o){var r=this;return new Promise((function(a,c){var i=r.createTransaction("readwrite").openCursor(IDBKeyRange.only(e));i.onsuccess=function(e){var i=e.target.result;if(i){var s=i.delete();r.executeQuery(s,(function(){r.Console&&console.log("".concat(n.default.getFormattedDate()," - ").concat(r.prefix," Data deleted successfully.")),a(),t&&t()}),(function(e){c(e),o&&o(e)}))}else r.Console&&console.log("".concat(n.default.getFormattedDate()," - ").concat(r.prefix," No data found for delete.")),a(),t&&t()},i.onerror=function(e){c(e.target.error),o&&o(e.target.error)}}))},e}();e.exports=r},607:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(o(86)),a=n(o(593)),c=function(){function e(e){var t=e.moduleName,o=e.Logger,n=e.Console;this.moduleName=t,this.Logger=o,this.Console=n,this.prefix="[LogModule] : "}return e.prototype.info=function(e){var t=a.default.getFormattedDate();this.Console&&console.log("".concat(t," - ").concat(this.prefix,"[Info] [").concat(this.moduleName,"] ").concat(e)),this.Logger(this.moduleName,"Info",e,t)},e.prototype.warn=function(e){var t=a.default.getFormattedDate();this.Console&&console.log("%c".concat(t," - ").concat(this.prefix,"[Warn] [").concat(this.moduleName,"] ").concat(e),"color: orange"),this.Logger(this.moduleName,"Warn",e,t)},e.prototype.error=function(e){var t=a.default.getFormattedDate();this.Console&&console.log("%c".concat(t," - ").concat(this.prefix,"[Error] [").concat(this.moduleName,"] ").concat(e),"color: red"),this.Logger(this.moduleName,"Error",e,t)},e.prototype.debug=function(e){var t=a.default.getFormattedDate();this.Console&&console.log("%c".concat(t," - ").concat(this.prefix,"[Debug] [").concat(this.moduleName,"] ").concat(e),"color: blue"),this.Logger(this.moduleName,"Debug",e,t)},e}(),i=function(){function e(e){var t=e.CollectionName,o=void 0===t?"logs":t,n=e.DatabaseName,r=void 0===n?"WEB_LOGS":n,c=e.ObjectStoreName,i=void 0===c?"logs":c,s=e.UserId,l=void 0===s?"UNKNOWN":s,u=e.ClientId,d=void 0===u?"UNKNOWN":u,f=e.Modules,g=void 0===f?[]:f,p=e.Mode,m=void 0===p?"development":p;this.CollectionName=o,this.DatabaseName=r,this.ObjectStoreName=i,this.UserId=l,this.ClientId=d,this.Mode=m,this.Console="development"===this.Mode,this.prefix="[LogSystem] : ",this.Console&&console.log("".concat(a.default.getFormattedDate()," - ").concat(this.prefix,"Logger initialized.")),this.Console||console.log("Logger Mode is production, no logs will be printed to console."),this.connect(),this.initModules(g)}return e.prototype.connect=function(){var e=this;this.dbClient=new r.default(this.DatabaseName,this.ObjectStoreName,this.Console),this.dbClient.openDatabase().then((function(){e.Console&&console.log("".concat(a.default.getFormattedDate()," - ").concat(e.prefix,"Connected to IndexedDB.")),e.createTable()})).catch((function(t){e.Console&&console.log("".concat(a.default.getFormattedDate()," - ").concat(e.prefix,"Error connecting to IndexedDB:"),t)}))},e.prototype.initModules=function(e){var t=this;e.forEach((function(e){t[e]=new c({moduleName:e,Logger:t.writeLogEntry.bind(t),Console:t.Console})}))},e.prototype.createTable=function(){var e=this;this.dbClient.createTable().then((function(){e.Console&&console.log("".concat(a.default.getFormattedDate()," - ").concat(e.prefix,"Logs table created successfully."))})).catch((function(t){e.Console&&console.log("".concat(a.default.getFormattedDate()," - ").concat(e.prefix,"Error creating logs table:"),t)}))},e.prototype.writeLogEntry=function(e,t,o,n){var r=this,c={userId:this.UserId,clientId:this.ClientId,module:e,level:t,timestamp:n,message:o,isUpload:!1,data:{key:"value"}};this.dbClient.insertData(c).then((function(){})).catch((function(e){r.Console&&console.log("".concat(a.default.getFormattedDate()," - ").concat(r.prefix,"Error inserting log:"),e)}))},e.prototype.getFilteredLogEntries=function(e,t,o){this.dbClient.selectData({startTime:a.default.getFormattedDate("1970-01-01 00:00:00.000"),endTime:a.default.getFormattedDate()},t,o)},e.prototype.updateConfig=function(e){this.UserId=e.userId||this.UserId,this.ClientId=e.clientId||this.ClientId},e}();window.Logger=i,t.default=i},593:e=>{var t=function(){function e(){}return e.getFormattedDate=function(e){var t=e?new Date(e):new Date,o=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),c=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0"),s=String(t.getMilliseconds()).padStart(3,"0");return"".concat(o,"-").concat(n,"-").concat(r," ").concat(a,":").concat(c,":").concat(i,".").concat(s)},e.generateRandomString=function(e){for(var t="",o=0;o<e;o++){var n=Math.floor(62*Math.random());t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n)}return t},e}();e.exports=t}},t={};!function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}(607)})();