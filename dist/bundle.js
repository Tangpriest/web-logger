(()=>{"use strict";var e={86:e=>{var t=function(){function e(e,t){this.prefix="[LogIndexedDBSDK] :",this.databaseName=e,this.objectStoreName=t,this.db=null}return e.prototype.openDatabase=function(){var e=this;return new Promise((function(t,o){var n=window.indexedDB.open(e.databaseName);n.onerror=function(t){var n=t.target.error;console.error("".concat(e.prefix," Failed to open database: ").concat(n)),o(n)},n.onsuccess=function(o){e.db=o.target.result,console.log("".concat(e.prefix," Open database ").concat(e.databaseName," successfully.")),t()},n.onupgradeneeded=function(t){var o=t.target.result;if(!o.objectStoreNames.contains(e.objectStoreName)){var n=o.createObjectStore(e.objectStoreName,{keyPath:"id",autoIncrement:!0});n.createIndex("byId","id",{unique:!0}),n.createIndex("byTimestamp","timestamp"),n.createIndex("byModule","module"),n.createIndex("byUserId","userId"),n.createIndex("byClientId","clientId")}}}))},e.prototype.executeQuery=function(e,t,o){var n=this;e.onsuccess=function(e){t&&t(e.target.result)},e.onerror=function(e){console.error("".concat(n.prefix," Error executing query: ").concat(e.target.error)),o&&o(e.target.error)}},e.prototype.createTransaction=function(e){return this.db.transaction(this.objectStoreName,e).objectStore(this.objectStoreName)},e.prototype.createTable=function(e,t){var o=this;return new Promise((function(n,r){o.openDatabase().then((function(){n(),e&&e()})).catch((function(e){r(e),t&&t(e)}))}))},e.prototype.insertData=function(e,t,o){var n=this;return new Promise((function(r,a){var c=n.createTransaction("readwrite").add(e);n.executeQuery(c,(function(){console.log("".concat(n.prefix," Data inserted successfully.")),r(),t&&t()}),(function(e){a(e),o&&o(e)}))}))},e.prototype.selectData=function(e,t,o){var n=this;return new Promise((function(r,a){var c,i=n.createTransaction("readonly"),s=[];console.log(e),(c=e&&e.startTime&&e.endTime?i.index("byTimestamp").openCursor(IDBKeyRange.bound(e.startTime,e.endTime)):i.openCursor()).onsuccess=function(o){var a=o.target.result;if(a){var c=a.value;e.module&&c.module!==e.module||e.level&&c.level!==e.level||e.userId&&c.userId!==e.userId||e.clientId&&c.clientId!==e.clientId||s.push(c),a.continue()}else console.log("".concat(n.prefix," Selected data:"),s),r(s),t&&t(s)},c.onerror=function(e){a(e.target.error),o&&o(e.target.error)}}))},e.prototype.updateData=function(e,t,o,n){var r=this;return new Promise((function(a,c){var i=r.createTransaction("readwrite").openCursor(IDBKeyRange.only(e));i.onsuccess=function(e){var i=e.target.result;if(i){var s=i.update(t);r.executeQuery(s,(function(){console.log("".concat(r.prefix," Data updated successfully.")),a(),o&&o()}),(function(e){c(e),n&&n(e)}))}else console.log("".concat(r.prefix," No data found for update.")),a(),o&&o()},i.onerror=function(e){c(e.target.error),n&&n(e.target.error)}}))},e.prototype.deleteData=function(e,t,o){var n=this;return new Promise((function(r,a){var c=n.createTransaction("readwrite").openCursor(IDBKeyRange.only(e));c.onsuccess=function(e){var c=e.target.result;if(c){var i=c.delete();n.executeQuery(i,(function(){console.log("".concat(n.prefix," Data deleted successfully.")),r(),t&&t()}),(function(e){a(e),o&&o(e)}))}else console.log("".concat(n.prefix," No data found for delete.")),r(),t&&t()},c.onerror=function(e){a(e.target.error),o&&o(e.target.error)}}))},e}();e.exports=t},607:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(o(86)),a=n(o(593)),c=function(){function e(e){var t=e.moduleName,o=e.Logger;this.moduleName=t,this.Logger=o}return e.prototype.info=function(e){console.log("[Info] [".concat(this.moduleName,"] ").concat(e)),this.Logger(this.moduleName,"Info",e)},e.prototype.warn=function(e){console.log("[Warn] [".concat(this.moduleName,"] ").concat(e)),this.Logger(this.moduleName,"Warn",e)},e}(),i=function(){function e(e){var t=e.CollectionName,o=void 0===t?"logs":t,n=e.DatabaseName,r=void 0===n?"MyDatabase":n,a=e.ObjectStoreName,c=void 0===a?"logs":a,i=e.UserId,s=void 0===i?"UNKNOWN":i,u=e.ClientId,l=void 0===u?"UNKNOWN":u,d=e.Modules,f=void 0===d?[]:d;this.CollectionName=o,this.DatabaseName=r,this.ObjectStoreName=c,this.UserId=s,this.ClientId=l,console.log(this.ClientId),this.prefix="[LogSystem] : ",console.log("".concat(this.prefix,"Logger initialized.")),this.connect(),this.initModules(f)}return e.prototype.connect=function(){var e=this;this.dbClient=new r.default(this.DatabaseName,this.ObjectStoreName),this.dbClient.openDatabase().then((function(){console.log("".concat(e.prefix,"Connected to IndexedDB.")),e.createTable()})).catch((function(t){console.error("".concat(e.prefix,"Error connecting to IndexedDB:"),t)}))},e.prototype.initModules=function(e){var t=this;e.forEach((function(e){t[e]=new c({moduleName:e,Logger:t.logger.bind(t)})}))},e.prototype.createTable=function(){var e=this;this.dbClient.createTable().then((function(){console.log("".concat(e.prefix,"Logs table created successfully."))})).catch((function(t){console.error("".concat(e.prefix,"Error creating logs table:"),t)}))},e.prototype.logger=function(e,t,o){var n=this,r={userId:this.UserId,clientId:this.ClientId,module:e,level:t,timestamp:a.default.getFormattedDate(),message:o,isUpload:!1,data:{key:"value"}};this.dbClient.insertData(r).then((function(){console.log("".concat(n.prefix,"Log inserted successfully."))})).catch((function(e){console.error("".concat(n.prefix,"Error inserting log:"),e)}))},e.prototype.getLogs=function(e,t,o){var n=this;this.dbClient.selectData({startTime:a.default.getFormattedDate("1970-01-01 00:00:00.000"),endTime:a.default.getFormattedDate()},t,o).then((function(e){console.log("".concat(n.prefix,"Logs retrieved successfully:"),e)})).catch((function(e){console.error("".concat(n.prefix,"Error retrieving logs:"),e)}))},e}();window.Logger=i,t.default=i},593:e=>{var t=function(){function e(){}return e.getFormattedDate=function(e){var t=e?new Date(e):new Date,o=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),c=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0"),s=String(t.getMilliseconds()).padStart(3,"0");return"".concat(o,"-").concat(n,"-").concat(r," ").concat(a,":").concat(c,":").concat(i,".").concat(s)},e.generateRandomString=function(e){for(var t="",o=0;o<e;o++){var n=Math.floor(62*Math.random());t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n)}return t},e}();e.exports=t}},t={};!function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}(607)})();
//# sourceMappingURL=bundle.js.map